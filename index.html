<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Orçamento Elite Car</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #f2f2f2;
    }
    #previewOrcamento {
      display: none;
      border: 1px solid #ccc;
      padding: 15px;
    }
    input[type="text"], input[type="email"], input[type="tel"], input[type="number"] {
      width: 100%;
      padding: 6px;
      margin: 4px 0 10px 0;
      box-sizing: border-box;
    }
    label {
      font-weight: bold;
    }
    .btn {
      padding: 10px 20px;
      margin-top: 10px;
      cursor: pointer;
    }
    .btn-primary {
      background-color: #007bff;
      color: white;
      border: none;
    }
    .btn-secondary {
      background-color: #6c757d;
      color: white;
      border: none;
    }
  </style>
</head>
<body>

  <h1>Gerar Orçamento - Elite Car</h1>

  <div id="formulario">
    <h2>Dados da Empresa</h2>
    <label for="empresaNome">Nome da Empresa</label>
    <input type="text" id="empresaNome" value="Elite Car" />

    <label for="empresaCNPJ">CNPJ</label>
    <input type="text" id="empresaCNPJ" value="12.345.678/0001-99" />

    <label for="empresaEndereco">Endereço</label>
    <input type="text" id="empresaEndereco" value="Rua Exemplo, 123, Cidade - Estado" />

    <label for="empresaTelefone">Telefone</label>
    <input type="tel" id="empresaTelefone" value="(11) 1234-5678" />

    <h2>Dados do Cliente</h2>
    <label for="clienteNome">Nome do Cliente</label>
    <input type="text" id="clienteNome" />

    <label for="clienteTelefone">Telefone do Cliente</label>
    <input type="tel" id="clienteTelefone" />

    <label for="clienteEmail">Email do Cliente</label>
    <input type="email" id="clienteEmail" />

    <label for="clienteVeiculo">Veículo</label>
    <input type="text" id="clienteVeiculo" />

    <h2>Serviços</h2>
    <table>
      <thead>
        <tr>
          <th>Serviço</th>
          <th>Preço Unitário</th>
          <th>Quantidade</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="nomeServico">Lavagem Simples</td>
          <td class="precoUnitario">R$ 50,00</td>
          <td><input type="number" class="quantidade" min="0" value="0" /></td>
        </tr>
        <tr>
          <td class="nomeServico">Polimento</td>
          <td class="precoUnitario">R$ 120,00</td>
          <td><input type="number" class="quantidade" min="0" value="0" /></td>
        </tr>
        <tr>
          <td class="nomeServico">Higienização Interna</td>
          <td class="precoUnitario">R$ 90,00</td>
          <td><input type="number" class="quantidade" min="0" value="0" /></td>
        </tr>
      </tbody>
    </table>

    <button class="btn btn-primary" onclick="gerarPreviewOrcamento()">Gerar Orçamento</button>
  </div>

  <div id="previewOrcamento">
    <!-- Preview do orçamento será gerado aqui -->
    <button class="btn btn-secondary" onclick="voltarFormulario()" style="margin-bottom: 15px;">Voltar</button>
  </div>

  <script>
    function gerarPreviewOrcamento() {
      const container = document.getElementById('previewOrcamento');

      const nome = document.getElementById('empresaNome').value;
      const cnpj = document.getElementById('empresaCNPJ').value;
      const endereco = document.getElementById('empresaEndereco').value;
      const telefone = document.getElementById('empresaTelefone').value;

      const clienteNome = document.getElementById('clienteNome').value;
      const clienteTelefone = document.getElementById('clienteTelefone').value;
      const clienteEmail = document.getElementById('clienteEmail').value;
      const clienteVeiculo = document.getElementById('clienteVeiculo').value;

      const itens = [];
      const quantidadeInputs = document.querySelectorAll('.quantidade');
      quantidadeInputs.forEach((input, index) => {
        const quantidade = parseInt(input.value) || 0;
        if (quantidade > 0) {
          const nomeServico = document.querySelectorAll('td.nomeServico')[index].textContent;
          const precoUnitarioText = document.querySelectorAll('td.precoUnitario')[index].textContent;
          const precoUnitario = parseFloat(precoUnitarioText.replace('R$ ', '').replace('.', '').replace(',', '.'));
          const subtotal = quantidade * precoUnitario;
          itens.push({
            nomeServico,
            quantidade,
            precoUnitario,
            subtotal,
          });
        }
      });

      if(itens.length === 0) {
        alert('Por favor, selecione pelo menos um serviço com quantidade maior que zero.');
        return;
      }

      let tabelaHTML = `
        <table>
          <thead>
            <tr>
              <th>Serviço</th>
              <th>Quantidade</th>
              <th>Preço Unitário</th>
              <th>Subtotal</th>
            </tr>
          </thead>
          <tbody>
      `;

      let valorTotal = 0;
      itens.forEach(item => {
        tabelaHTML += `
          <tr>
            <td>${item.nomeServico}</td>
            <td>${item.quantidade}</td>
            <td>R$ ${item.precoUnitario.toFixed(2).replace('.', ',')}</td>
            <td>R$ ${item.subtotal.toFixed(2).replace('.', ',')}</td>
          </tr>
        `;
        valorTotal += item.subtotal;
      });

      tabelaHTML += `
          </tbody>
        </table>
      `;

      const dadosEmpresaHTML = `
        <div style="text-align: center; margin-bottom: 15px;">
          <img src="img/logo.png" alt="Logo Elite Car" style="max-width: 150px; margin-bottom: 10px;">
          <h2>Elite Car</h2>
          <div><strong>${nome}</strong></div>
          <div>CNPJ: ${cnpj}</div>
          <div>Endereço: ${endereco}</div>
          <div>Telefone: ${telefone}</div>
        </div>
      `;

      const dadosClienteHTML = `
        <div style="margin-bottom: 15px;">
          <strong>Cliente:</strong> ${clienteNome} <br>
          <strong>Telefone:</strong> ${clienteTelefone} <br>
          <strong>Email:</strong> ${clienteEmail} <br>
          <strong>Veículo:</strong> ${clienteVeiculo}
        </div>
      `;

      container.innerHTML = `
        <button class="btn btn-secondary" onclick="voltarFormulario()" style="margin-bottom: 15px;">Voltar</button>
        ${dadosEmpresaHTML}
        ${dadosClienteHTML}
        ${tabelaHTML}
        <div style="text-align: right; margin-top: 15px; font-weight: bold;">
          Valor Total: R$ ${valorTotal.toFixed(2).replace('.', ',')}
        </div>
      `;

      document.getElementById('formulario').style.display = 'none';
      container.style.display = 'block';
    }

    function voltarFormulario() {
      document.getElementById('previewOrcamento').style.display = 'none';
      document.getElementById('formulario').style.display = 'block';
    }
  </script>
</body>
</html>
